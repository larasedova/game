# Импортируем модуль random для генерации случайного выбора компьютера
import random


def get_user_choice():
    """
    Функция для получения выбора пользователя.
    Запрашивает ввод, пока не будет получено допустимое значение.
    """
    while True:
        # Приводим ввод к нижнему регистру для удобства сравнения
        user_input = input("Выберите: камень (к), ножницы (н), бумага (б) или 'выход' для выхода: ").lower()

        # Проверяем, есть ли ввод в списке допустимых вариантов
        if user_input in ['к', 'н', 'б', 'выход']:
            return user_input  # Возвращаем корректный выбор

        # Если ввод некорректен, выводим сообщение и повторяем цикл
        print("Некорректный ввод. Попробуйте ещё раз.")


def get_computer_choice():
    """
    Функция для случайного выбора компьютера.
    Возвращает один из вариантов: 'к', 'н' или 'б'.
    """
    # random.choice выбирает случайный элемент из списка
    return random.choice(['к', 'н', 'б'])


def determine_winner(user_choice, computer_choice):
    """
    Определяет победителя на основе выбора пользователя и компьютера.
    Возвращает строку с результатом: победа, поражение или ничья.
    """
    # Если выборы совпадают - ничья
    if user_choice == computer_choice:
        return "Ничья!"

    # Словарь условий победы: ключ побеждает значение
    win_conditions = {
        'к': 'н',  # Камень побеждает ножницы
        'н': 'б',  # Ножницы побеждают бумагу
        'б': 'к'  # Бумага побеждает камень
    }

    # Проверяем, побеждает ли выбор пользователя выбор компьютера
    if win_conditions[user_choice] == computer_choice:
        return "Вы победили!"
    else:
        return "Компьютер победил!"


def main():
    """
    Основная функция игры, управляющая игровым процессом.
    """
    print("Добро пожаловать в игру 'Камень, Ножницы, Бумага'!")

    # Бесконечный цикл игры, пока пользователь не выйдет
    while True:
        # Получаем выбор пользователя
        user_choice = get_user_choice()

        # Если пользователь ввёл 'выход' - завершаем игру
        if user_choice == 'выход':
            print("Игра завершена.")
            break

        # Получаем случайный выбор компьютера
        computer_choice = get_computer_choice()

        # Выводим выборы обоих игроков
        print(f"Вы выбрали: {user_choice}")
        print(f"Компьютер выбрал: {computer_choice}")

        # Определяем победителя и выводим результат
        result = determine_winner(user_choice, computer_choice)
        print(result + "\n")  # Добавляем пустую строку для читаемости


# Стандартная проверка для запуска кода как самостоятельного скрипта
if __name__ == "__main__":
    main()